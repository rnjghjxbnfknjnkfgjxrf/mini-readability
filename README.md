# mini-readability
Универсальный парсер новостный сайтов, извлекающий из них
тексты статей.
## Установка
### MS Windows
```
python -m venv <venv_name>
.\<venv_name>\Scripts\Activate.ps1
pip install -r requirements.txt
```
### Linux
```
python3 -m venv <venv_name>
source <venv_name>/bin/activate
pip install -r requirements.txt
```

## Использование
```
python3 parse.py <url>
```

## Конфигурирование
Файл `config.json`:

```
{
    "main_tag" : {
        "name": str,                --- название тега
        "class_": str               --- класс тега 
                                        ("any", если
                                         класс не важен)
    },
    "secondary_tags" : [{           
    }, ...],                        --- список объектов
                                        с такой же структурой,
                                        как и в "main_tag"
    "text_tag": {
        "name": str,                --- название тега
        "class_": str               --- класс тега 
                                        ("any", если
                                         класс не важен)
    },
    "characters_per_line" : int,    --- максимальное количество
                                        символов в строке в
                                        итоговом файле
    "paragraphs_indent": str,       --- символы, по которым
                                        будут объединяться
                                        абзацы
    "default_file_name": str,       --- имя,которое будет
                                        присвоено файлу, если
                                        не получится получить
                                        название из адреса
    "file_extension": str           --- расширение итогового
                                        файла
}
  
```

## Запуск с конфигурацией по умолчанию

```
python3 parse.py <url> --default
```
Значения по умолчанию:
<details>
<summary><i>Открыть полный текст</i></summary>


```

{
    "main_tag" : {
        "name": "div",
        "class_": "any"
    },
    "secondary_tags" : [
        {
            "name": "span",
            "class_": "any"
        },
        {
            "name": "li",
            "class_": "any"
        },
        {
            "name": "blockquote",
            "class_": "any"
        }
    ],
    "text_tag": {
        "name": "p",
        "class_": "any"
    },
    "characters_per_line" : 80,
    "paragraphs_indent": "\n\n",
    "default_file_name": "article",
    "file_extension": "txt"
}

```
</details>


## Пример конфигурирования
###  https://ria.ru/20230412/telenok-1864692496.html
#### Конфигурация по умолчанию

<details>
<summary><i>Открыть полный текст</i></summary>

```
Первый в Бурятии теленок от трансплантации эмбриона родился в Кабанском районе
республики

"Наши педагоги стали свидетелями пока уникального для Бурятии случая — рождения
теленка от трансплантации эмбрионов", — говорится в публикации.
```
</details>

#### Настроенная конфигурация
* Результат:

<details>
<summary><i>Открыть полный текст</i></summary>

```
Первый в Бурятии теленок от трансплантации эмбриона родился в Кабанском районе
республики

УЛАН-УДЭ, 12 апр — РИА Новости. В Бурятии родился первый теленок "из пробирки" —
от трансплантации эмбриона, сообщается в Telegram-канале
[https://t.me/bgsha_official/5627] Бурятской государственной
сельскохозяйственной академии.

Это произошло в ООО "Рубин" — одном из ведущих сельхозпредприятий республики,
которое расположено в Кабанском районе.

В пресс-службе Министерства сельского хозяйства и продовольствия Бурятии
рассказали РИА Новости, что трансплантацию провели в начале июня 2022 года.
Разведением занимались специалисты республиканской Госплемслужбы совместно с
племпредприятием "Барнаульское".

В ведомстве подчеркнули, что уже получают от других фермерских хозяйств заявки
по трансплантации эмбриона, так что метод может получить дальнейшее
распространение.
```
</details>

* Файл `config.json`:

<details>
<summary><i>Открыть полный текст</i></summary>

```
{
    "main_tag" : {
        "name": "div",
        "class_": "article__block"
    },
    "secondary_tags" : [
    ],
    "text_tag": {
        "name": "div",
        "class_": "article__text"
    },
    "characters_per_line" : 80,
    "paragraphs_indent": "\n\n",
    "default_file_name": "article",
    "file_extension": "txt"
}
```
</details>

## Дальнейшие улучшения
Хоть введенные улучшения могут оказаться полезны в некоторых ситуациях, но все еще возникают случаи, когда не получается корретно спарсить страницу, даже с учетом настройки.
Вот некоторые идеи, которые, вероятно, смогут помочь:
* Сделать поиск текста не по одному текстовому тегу, а по любому заданному количеству.
* Сделать список тегов-исключений.
* Отказаться от идеи выбора элемента, в котором содержится только один тег \<h1> (либо сделать эту функцию контроллируемой).

